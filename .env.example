# GPU Cluster Manager Configuration

# Cluster Settings
CLUSTER_NAME="gpu-cluster-prod"
CLUSTER_ID="cluster-001"
NODE_NAME="node-001"
NODE_ID="node-001-uuid"

# Network Configuration
CLUSTER_BIND_ADDRESS="0.0.0.0"
CLUSTER_PORT=9090
API_PORT=8080
METRICS_PORT=9091

# Raft Consensus Settings
RAFT_NODE_ID="raft-node-001"
RAFT_BIND_ADDRESS="0.0.0.0:7070"
RAFT_PEERS="raft-node-001=0.0.0.0:7070,raft-node-002=192.168.1.2:7070,raft-node-003=192.168.1.3:7070"
RAFT_DATA_DIR="/var/lib/gpu-cluster/raft"

# GPU Hardware Settings
NVIDIA_VISIBLE_DEVICES="0,1,2,3"  # GPU device indices to manage
AMD_VISIBLE_DEVICES="0,1"
INTEL_VISIBLE_DEVICES="0"
GPU_MEMORY_RESERVE_MB=1024  # Memory to reserve per GPU (MB)

# Scheduler Configuration
SCHEDULER_TYPE="real_time"  # Options: fifo, priority, affinity, gang, real_time
SCHEDULER_LATENCY_TARGET_US=50  # Target scheduling latency (microseconds)
SCHEDULER_PREEMPTION_ENABLED=true
SCHEDULER_GANG_SIZE=4  # Maximum GPUs per gang-scheduled job

# Memory Management
MEMORY_POOL_SIZE_MB=16384  # Per-GPU memory pool size (MB)
MEMORY_DEFRAG_INTERVAL_SEC=300  # Memory defragmentation interval
MEMORY_OVERSUBSCRIPTION_RATIO=1.2  # Allow 20% memory oversubscription

# Security Settings
AUTH_ENABLED=true
AUTH_SECRET_KEY="your-secret-key-change-this"
JWT_EXPIRATION_HOURS=24
API_RATE_LIMIT_PER_MINUTE=1000
MULTI_TENANT_ISOLATION=true

# Monitoring and Observability
METRICS_ENABLED=true
PROMETHEUS_ENDPOINT="http://prometheus:9090"
TRACING_ENABLED=true
JAEGER_ENDPOINT="http://jaeger:14268/api/traces"
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
STRUCTURED_LOGGING=true

# RDMA Networking (Optional)
RDMA_ENABLED=false
RDMA_DEVICE="mlx5_0"  # InfiniBand device name
RDMA_PORT=1
RDMA_GID_INDEX=0

# Database Settings (for cluster state persistence)
DATABASE_URL="postgresql://cluster:password@localhost:5432/gpu_cluster"
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30

# Performance Tuning
CPU_AFFINITY="0-15"  # CPU cores for cluster manager process
NUMA_POLICY="local"  # NUMA memory allocation policy
PROCESS_PRIORITY=-10  # Process priority (negative = higher priority)

# Development/Testing Settings
DEBUG_MODE=false
BENCHMARK_MODE=false  # Enable detailed performance benchmarking
CHAOS_TESTING=false  # Enable chaos engineering features
MOCK_GPU_DEVICES=false  # Use mock GPU devices for testing

# External Integrations
KUBERNETES_ENABLED=false
K8S_NAMESPACE="gpu-cluster"
K8S_SERVICE_ACCOUNT="gpu-cluster-manager"

# Backup and Recovery
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=6
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH="/var/backup/gpu-cluster"

# Alerting Configuration
ALERTING_ENABLED=true
SLACK_WEBHOOK_URL=""
EMAIL_SMTP_SERVER=""
EMAIL_SMTP_PORT=587
EMAIL_USERNAME=""
EMAIL_PASSWORD=""
ALERT_COOLDOWN_MINUTES=15

# Resource Quotas (Multi-tenant)
DEFAULT_GPU_QUOTA=2
DEFAULT_MEMORY_QUOTA_GB=32
DEFAULT_COMPUTE_QUOTA_HOURS=100
QUOTA_ENFORCEMENT_STRICT=true